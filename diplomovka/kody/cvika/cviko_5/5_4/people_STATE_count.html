<html>
<body>

  <script type="text/javascript">
  function loadXMLDoc(dname)
  {
    if (window.XMLHttpRequest)
    {
      xhttp=new XMLHttpRequest(); 
    }
    else
    {
      xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send("");
    return xhttp.responseXML;
  }

  xml=loadXMLDoc("/diplomovka/kody/cvika/cviko_5/5_1/people.xml");
  
      //cestny vyraz, ktory vyberie vsetky atributy 'first-name' elementov 'person', ktorych detske elementy 'address' 
      //maju atribut 'state' s hodnotou 'wa'
      //A (sucasne)
      //vsetky atributy 'last-name' elementov 'person', ktorych detske elementy 'address' 
      //maju atribut 'state' s hodnotou 'wa'
  path="/people/person[address/@state='wa']/@first-name | /people/person[address/@state='wa']/@last-name"
  path_person_count="/people/person[address/@state='wa']/@last-name";
  
  // kod pre IE
  if (window.ActiveXObject)
  {
    var nodes=xml.selectNodes(path);

    for (i=0;i<nodes.length;i++)
    {
      document.write(nodes[i].nodeValue);
      document.write("<br />");
    }
  }
  // kod pre Mozilla, Firefox, Opera atd.
  else if (document.implementation && document.implementation.createDocument)
  {
    var nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
    var result=nodes.iterateNext();
    
    var nodes_person_count=xml.evaluate(path_person_count, xml, null, XPathResult.ANY_TYPE, null);
    var result_person_count=nodes_person_count.iterateNext();
    var count=0;

    //zistenie poctu elementov 'person', ktore maju v detskom elemente 'address' 
    //atribut 'state' s hodnotou 'wa'
    while (result_person_count)
    {
      result_person_count=nodes_person_count.iterateNext();
      count++
    }
    document.write(count);
    document.write("<br />");

    /* vypisanie obsahu vybratych a operatorom AND zlucenych atributov elementov do aktualneho dokumentu 
       okna, cize obsahov atributov 'first-name' elementov 'person', ktorych detske elementy 'address' maju atribut 
       'state' s hodnotou 'wa'
       A (sucasne)
       obsahov atributov 'last-name' elementov 'person', ktorych detske elementy 'address'
       maju atribut 'state' s hodnotou 'wa'
   */
    while (result)
    {
      //document.write(result.childNodes[0].nodeValue); //kod funguj√∫ci v starsich verziach Mozilly Firefox
      document.write(result.value); //kod fungujuci v Mozille Firefox 19.0
      document.write("<br />");
      result=nodes.iterateNext();
    }

  }
  </script>

</body>
</html>
