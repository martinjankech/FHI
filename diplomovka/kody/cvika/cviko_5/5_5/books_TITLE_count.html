<html>
<body>


  <script type="text/javascript">

  function loadXMLDoc(dname)
  {
    if (window.XMLHttpRequest)
    {
      xhttp=new XMLHttpRequest(); //vytvorenie 'XMLHttpRequest' objektu a vlozenie ukaz. nan do prem. 'xhttp'
    }
    else
    {
      xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send("");
    return xhttp.responseXML;
  }

  //tu je zavolana funkcia "loadXMLDoc" a nacitany XML dokument do web aplikacie (u nas do web stranky)
  xml=loadXMLDoc("books.xml");
           //cestny vyraz, ktory vyberie vsetky elementy 'title' elementov 'book', ktorych detske elementy 'year' 
           //maju hodnotu totoznu s '2003'
  path="/bookstore/book[year=2003]/title";
  
  //kod pre IE 5 a 6
  if (window.ActiveXObject)
  {
    var nodes=xml.selectNodes(path);

    for (i=0;i<nodes.length;i++)
    {
      document.write(nodes[i].childNodes[0].nodeValue);
      document.write("<br />");
    }
  }
  //kod pre Mozillu Firefox, Operu atd.
  else if (document.implementation && document.implementation.createDocument)
  {
    var nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
    var result=nodes.iterateNext();
    var count=0

    //zistenie poctu elementov 'book' s detskym elementom 'year' s hodnotu totoznu s '2003'
    //a jeho vypisanie do aktualneho dokumentu okna
    while (result)
    {
      result=nodes.iterateNext();
      count++
    }
    document.write(count);
    document.write("<br />");

    //"vynulovanie" indexu v poli nodes[0]
    nodes=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
    result=nodes.iterateNext();

    //vypisanie obsahov hladanych detskych elementov 'title' elementov 'book' do aktualneho dokumentu okna
    while (result)
    {
      document.write(result.childNodes[0].nodeValue);
      document.write("<br />");
      result=nodes.iterateNext();
    }

  }
  </script>

</body>
</html>
