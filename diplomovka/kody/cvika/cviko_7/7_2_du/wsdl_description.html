<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
  

  <title>WSDL Description</title>

  <label for="cars">Choose a option:</label>

<select name="options" id="options">
  <option value="1">ops names</option>
  <option value="2">ops names with doc</option>
  <option value="3">ops names with doc and input names</option>
  <option value="4">ops names with doc, input and outpus messages</option>
</select>

  <script type="text/javascript">
    xml=loadXMLDoc("ArithmeticOps_asmx.xml");  //tu je zavolana funkcia "loadXMLDoc"
  var path_operation_names="definitions/portType/operation//@*[\"name\"=local-name()]"
  var path_operation_description="definitions/portType/operation//*[\"documentation\"=local-name()]"
  var  path_input="definitions/portType/operation/input/@message"
  var path_output="definitions/portType/operation/output/@message"
  var node1=xmlQuery(path_operation_names);
  var string1=createStringFromQuery(node1);
  var node2=xmlQuery(path_operation_description);
  var string2=createStringFromQuery(node2);
  var node3=xmlQuery(path_input);
  var string3=createStringFromQuery(node3);
  var node4=xmlQuery(path_output);
  var string4=createStringFromQuery(node4); 
  var count=string1.length

   var messageNumberService = "pocet metod poskytovanych sluzboj je "
   var messageMainService1 = "počet operácií vystavených web službou a ich identifikátory: "
   var messageMainService2 = "počet operácií vystavených web službou, ich identifikátory a popisy,"
   var messageMainService3 = "počet operácií vystavených web službou, ich identifikátory, popisy a vstupné správy, "
   var messageMainService4 = "počet operácií vystavených web službou, ich identifikátory, popisy, vstupné a výstupné správy"
   //var messageNameService = "Web sluzbov poskytovane operacie s ich popisom a vstupnymi spravami"+"\n"+string

  function loadXMLDoc(dname)
  {
    if (window.XMLHttpRequest)
    {
      xhttp=new XMLHttpRequest();
    }
    else
    {
      xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send("");
    return xhttp.responseXML;
  }
 function xmlQuery(path){
var node=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
return node;
}

function createStringFromQuery(node)
{ 
  var result=node.iterateNext();
  var string=[]
  var i=0
  while(result){
  string[i]=result;
  result=node.iterateNext();
  i++;
}return string;
}
  function Find_in_wsdl(){
//path_operation_count= "definitions/types/*[\"schema\"=local-name()]/*[\"element\"=local-name()]/@*[\"name\"=local-name()]";
   
 
   switch(document.getElementById("options").value) {
  case "1":{
    var message=messageNumberService+""+count+"\n"+messageMainService1+"\n";
    for(st of string1){
     message=message+"\n"+st.value;
    }
    alert(message)
    break;
  }
    case "2":
    var message=messageNumberService+""+count+"\n"+messageMainService2+"\n";
    var i=0
    for(st of string1){
     message=message+"\n"+st.value+"\n"+string2[i].childNodes[0].nodeValue
     i++
    }
    alert(message)
    break;

  case "3":
  var message=messageNumberService+""+count+"\n"+messageMainService3+"\n";
   i=0
    for(st of string1){
     message=message+"\n"+st.value+"\n"+string2[i].childNodes[0].nodeValue+"\n"+string3[i].value
     i++
    }
    alert(message)

  break
  case "4":
  var message=messageNumberService+""+count+"\n"+messageMainService4+"\n";
  i=0
    for(st of string1){
     message=message+"\n"+st.value+"\n"+string2[i].childNodes[0].nodeValue+"\n"+string3[i].value+"\n"+string4[i].value+"\n";
     i++
    }
    alert(message)
  break;
  default:
 alert("este nehotovo")
}


 





}






// var nodes=xml.evaluate(path_operation_names, xml, null, XPathResult.ANY_TYPE, null);
// var result=nodes.iterateNext();
// var nodesOperationDescription=xml.evaluate(path_operation_description, xml, null, XPathResult.ANY_TYPE, null);
// var resultDescription=nodesOperationDescription.iterateNext();
// var nodesInput=xml.evaluate(path_input, xml, null, XPathResult.ANY_TYPE, null);
// var resultInput=nodesInput.iterateNext();

// var nodesOutput=xml.evaluate(path_output, xml, null, XPathResult.ANY_TYPE, null);
// var resultOutput=nodesOutput.iterateNext();
// var string=""
// var count = 0;
// while(result)
// {
//   string=string+result.value+"\n"+resultDescription.childNodes[0].nodeValue+"\n"+resultInput.value+"\n"+resultOutput.value;
 
//   result=nodes.iterateNext();
//   resultDescription=nodesOperationDescription.iterateNext();
//   resultInput=nodesInput.iterateNext();
//   resultOutput=nodesOutput.iterateNext();
//   count++;
//   string=string+"\n";
// }

// var finalAlert= messageNumberService+messageNameService
// alert(finalAlert)

  
  //funkcia najde elementy 'person', ktore maju v atribute 'street' ich dcerskych elementov 'address' retazec 'main', 
  //'south' alebo 'west'
  //a zobrazi hodnoty atributov 'first-name' a 'last-name' takychto elementov 'person' a hodnoty atributov 'street', 
  //'city' a 'state' ich dcerskych elementov 'address' 
  
  </script>
  
</head>


<body>

  
  
  <script type="text/javascript">
  document.getElementById("user_searched_string").focus();
  </script>
  <br>
  <button type="button" onclick="Find_in_wsdl()">Display results</button>

</body>
</html>
